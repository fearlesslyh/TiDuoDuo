[AI答题平台项目笔记.md](https://github.com/user-attachments/files/19467268/AI.md)
# AI答题平台项目笔记

## 一、流程：后端——>前端——>优化——>部署

## 二、需求分析

1. 明确要做的需求，然后把需求模块化，最后分级
2. - 用户模块
     - 注册
     - 登录
     - 管理——管理员
   - 应用模块
     - 创建
     - 修改
     - 删除
     - 查看列表
     - 查看详情
     - 查看自己创建的应用
     - 管理——管理员
     - 审核与下架——管理员
     - 应用分享：扫码查看
   - 题目模块
     - 创建：题目选项的得分
     - 修改
     - 删除
     - 管理——管理员
     - AI生成题目
   - 打分模块
     - 创建
     - 修改
     - 删除
     - 回答计算评分
       - 自定义——测评
       - 自定义——打分
       - AI评分
     - 管理——管理员
   - 回答模块
     - 提交回答（创建）
     - 查看某次回答的评分结果
     - 查看自己提交的回答列表
   - 总体提交的分析模块
     - 评分结果分析和查看

## 三、设计库表

分为：

1. 用户表
2. 应用表
3. 题目表
4. 评分结果表
5. 用户答案记录表

## 四、后端项目整体初始化

- MySQL 必须准备 8.x 版本
- Redis 默认不开启
- Elasticsearch 默认不开启
- COS 对象存储，不影响运行

执行默认写好的sql语句脚本，建表

1. 改模块名（全局替换）
2. 改包名（重构 + 全局替换）
3. 移除不必要的模块（Elasticsearch、微信开发、表格处理、定时任务相关代码）。不移除也不影响项目运行。
4. 执行真实业务的库表初始化脚本，更改数据库等配置为自己的，尝试重新运行项目。

## 五、后端基础开发（增删改查）

### 1.数据访问层代码生成

通过mybatis X代码生成mapper和实体类，随后把文件放入对应目录下

### 2.业务代码逻辑开发

包括 controller层、service层（接口以及实现类）、数据模型（DTO，VO，Enum类）

### 3.数据模型开发

编写数据模型包装类（请求类DTO和视图类VO）、JSON 结构对应的类、枚举类。 

包装类需要根据前端实际传递的请求参数或需要的响应结果自行修改。

### 4.接口开发（controller，也可以叫控制层）

根据不同的模块，编写对应的controller。

controller进行数据的校验，鉴权，调用对应service方法。

先把实体类（请求的类）转化为DTO，然后进行一系列逻辑判定，

最后把封装好的数据（一般是VO）返回给前端。

具体逻辑，需要参考需求。可以想象controller是一个酒店接待前台，然后进行一系列的操作。比如查询请求。用户提交请求，接待提供表格并填写信息，接待校验提交的信息，以及权限，查询信息是否存在，返回信息（如果不存在，需要报告，使用enum类返回查询错误的信息）

### 5.服务开发（service层）

通过增删改查的开发，可以完成下列功能：

- 用户模块
- - 注册 P0
  - 登录 P0
  - 管理用户 - 增删改查（仅管理员可用）P1
- 应用模块
- - 创建应用 P0
  - 修改应用 P1
  - 删除应用 P1
  - 查看应用列表 P0
  - 查看应用详情 P0
  - 查看自己创建的应用 P1
  - 管理应用 - 增删改查（仅管理员可用）P0
- 题目模块**（必须和一个应用绑定）**
- - 创建题目（包括题目选项得分设置）P0
  - 修改题目 P1
  - 删除题目 P1
  - 管理题目 - 增删改查（仅管理员可用）P1
- 评分模块**（必须和一个应用绑定）**
- - 创建评分结果 P0
  - 修改评分结果 P1
  - 删除评分结果 P1
  - 管理评分结果 - 增删改查（仅管理员可用）P1
- 回答模块**（必须和一个应用绑定）**
- - 提交回答（创建）P0
  - 查看某次回答的评分结果 P0
  - 查看自己提交的回答列表 P1
  - 管理回答 - 增删改查（仅管理员可用）P1

**根据以上的需求，进行服务的开发**

比如，酒店前台接收到了请求，客户需要具体做什么事情，后台服务编写此服务的代码，进行处理，最后交由controller调用，并返还数据

## 六、后端核心业务开发

### 应用审核功能

审核是一个通用能力。具体体现为，应用提交，需要判定是否合法，审核的状态，以及审核的一些消息

### 评分模块实现

需求：针对不同的应用类别和评分策略，编写不同的实现逻辑。

**核心实现方式：策略模式**

策略模式是一种行为设计模式，它定义了一系列算法，并将每个算法封装到独立的类中，使得它们可以相互替换。

在本项目的场景中，输入的参数是一致的（应用和用户的答案列表），并且每种实现逻辑区别较大，很适合使用策略模式。

所有代码放到 scoring 包中，模块化。

==**当提及xx策略，就用到策略模式。可以考虑为针对同一种情况，提供不同的方法。这就是策略模式**==

#### 两种策略实现

##### 1、自定义测评类应用评分策略

##### 2、自定义得分类应用评分策略

==针对不同的应用，采取不同的策略，但是提交的答案是一样的，只是根据应用的种类进行了不同的评分。==

#### 全局执行器

简化外部对策略的调用，只需通过提交答案列表，和相关的应用种类即可调用。

在调用的时候，通过==**注解驱动**==的方式，申明应用类型和评分策略。

在执行器的调用判定的时候，自动评定注解，再调用对应的逻辑即可

### 回答模块

在 `addUserAnswer` 创建回答方法中补充 “调用评分模块并更新回答表” 的逻辑即可。

![image-20250326210049636](C:\Users\RAOYAO\AppData\Roaming\Typora\typora-user-images\image-20250326210049636.png)

### 控制应用可见范围

如果应用未过审，用户无法答题、并且无法通过列表查看到未过审的应用。

### 最后

使用 Swagger 对整个流程进行测试即可。
